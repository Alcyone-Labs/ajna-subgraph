specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: PositionManager
    network: goerli
    source:
      address: "0x83AB3762A4AeC9FBD4e7c01581C9495f2160630b"
      abi: PositionManager
      startBlock: 8884538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Approval
        - ApprovalForAll
        - Burn
        - MemorializePosition
        - Mint
        - MoveLiquidity
        - RedeemPosition
        - Transfer
      abis:
        - name: PositionManager
          file: ./abis/PositionManager.json
        - name: ERC721
          file: ./abis/ERC721.json
        - name: PoolInfoUtils
          file: ./abis/PoolInfoUtils.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,indexed uint256)
          handler: handleApproval
        - event: ApprovalForAll(indexed address,indexed address,bool)
          handler: handleApprovalForAll
        - event: Burn(indexed address,indexed uint256)
          handler: handleBurn
        - event: MemorializePosition(indexed address,uint256,uint256[])
          handler: handleMemorializePosition
        - event: Mint(indexed address,indexed address,uint256)
          handler: handleMint
        - event: MoveLiquidity(indexed address,uint256,uint256,uint256,uint256,uint256)
          handler: handleMoveLiquidity
        - event: RedeemPosition(indexed address,uint256,uint256[])
          handler: handleRedeemPosition
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/position-manager.ts
  - kind: ethereum
    name: ERC20PoolFactory
    network: goerli
    source:
      address: "0x68ced2E7d257da67794B00556B31203A344d3c1e"
      abi: ERC20PoolFactory
      startBlock: 8884537
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PoolCreated
      abis:
        - name: ERC20PoolFactory
          file: ./abis/ERC20PoolFactory.json
        - name: ERC20Pool
          file: ./abis/ERC20Pool.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: PoolCreated(address)
          handler: handlePoolCreated
      file: ./src/erc-20-pool-factory.ts
  - kind: ethereum
    name: RewardsManager
    network: goerli
    source:
      address: "0xaF9bc1F09fe561CbD00018fC352507fD23cD46E2"
      abi: RewardsManager
      startBlock: 8884538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ClaimRewards
        - MoveStakedLiquidity
        - Stake
        - Unstake
        - UpdateExchangeRates
      abis:
        - name: RewardsManager
          file: ./abis/RewardsManager.json
        - name: PositionManager
          file: ./abis/PositionManager.json
      eventHandlers:
        - event: ClaimRewards(indexed address,indexed address,indexed uint256,uint256[],uint256)
          handler: handleClaimRewards
        - event: MoveStakedLiquidity(uint256,uint256[],uint256[])
          handler: handleMoveStakedLiquidity
        - event: Stake(indexed address,indexed address,indexed uint256)
          handler: handleStake
        - event: Unstake(indexed address,indexed address,indexed uint256)
          handler: handleUnstake
        - event: UpdateExchangeRates(indexed address,indexed address,uint256[],uint256)
          handler: handleUpdateExchangeRates
      file: ./src/rewards-manager.ts
  - kind: ethereum
    name: ERC721PoolFactory
    network: goerli
    source:
      address: "0x86EEA73d8071b03D998f1c466fe2125f0D3C4195"
      abi: ERC721PoolFactory
      startBlock: 8884538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PoolCreated
      abis:
        - name: ERC721PoolFactory
          file: ./abis/ERC721PoolFactory.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC721
          file: ./abis/ERC721.json
      eventHandlers:
        - event: PoolCreated(address)
          handler: handlePoolCreated
      file: ./src/erc-721-pool-factory.ts
  - kind: ethereum
    name: GrantFund
    network: goerli
    source:
      address: "0x54110a15011bcb145a8CD4f5adf108B2B6939A1e"
      abi: GrantFund
      startBlock: 8885195
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DelegateRewardClaimed
        - FundTreasury
        - FundedSlateUpdated
        - ProposalCreated
        - ProposalExecuted
        - QuarterlyDistributionStarted
        - VoteCast
      abis:
        - name: GrantFund
          file: ./abis/GrantFund.json
      eventHandlers:
        - event: DelegateRewardClaimed(indexed address,indexed uint256,uint256)
          handler: handleDelegateRewardClaimed
        - event: FundTreasury(uint256,uint256)
          handler: handleFundTreasury
        - event: FundedSlateUpdated(indexed uint256,indexed bytes32)
          handler: handleFundedSlateUpdated
        - event: ProposalCreated(uint256,address,address[],uint256[],string[],bytes[],uint256,uint256,string)
          handler: handleProposalCreated
        - event: ProposalExecuted(uint256)
          handler: handleProposalExecuted
        - event: QuarterlyDistributionStarted(indexed uint256,uint256,uint256)
          handler: handleQuarterlyDistributionStarted
        - event: VoteCast(indexed address,uint256,uint8,uint256,string)
          handler: handleVoteCast
      file: ./src/grant-fund.ts
templates:
  - kind: ethereum
    name: ERC20Pool
    network: goerli
    source:
      abi: ERC20Pool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AddCollateral
        - AddQuoteToken
        - ApproveLPTransferors
        - AuctionNFTSettle
        - AuctionSettle
        - BondWithdrawn
        - BucketBankruptcy
        - BucketTake
        - BucketTakeLPAwarded
        - DecreaseLPAllowance
        - DrawDebt
        - IncreaseLPAllowance
        - Kick
        - LoanStamped
        - MoveQuoteToken
        - RemoveCollateral
        - RemoveQuoteToken
        - RepayDebt
        - ReserveAuctionKick
        - ReserveAuctionTake
        - ResetInterestRate
        - RevokeLPAllowance
        - RevokeLPTransferors
        - Settle
        - Take
        - TransferLP
        - UpdateInterestRate
      abis:
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC20Pool
          file: ./abis/ERC20Pool.json
        - name: PoolInfoUtils
          file: ./abis/PoolInfoUtils.json
      eventHandlers:
        - event: AddCollateral(indexed address,indexed uint256,uint256,uint256)
          handler: handleAddCollateral
        - event: AddQuoteToken(indexed address,indexed uint256,uint256,uint256,uint256)
          handler: handleAddQuoteToken
        - event: ApproveLPTransferors(indexed address,address[])
          handler: handleApproveLPTransferors
        - event: AuctionNFTSettle(indexed address,uint256,uint256,uint256)
          handler: handleAuctionNFTSettle
        - event: AuctionSettle(indexed address,uint256)
          handler: handleAuctionSettle
        - event: BondWithdrawn(indexed address,indexed address,uint256)
          handler: handleBondWithdrawn
        - event: BucketBankruptcy(indexed uint256,uint256)
          handler: handleBucketBankruptcy
        - event: BucketTake(indexed address,uint256,uint256,uint256,uint256,bool)
          handler: handleBucketTake
        - event: BucketTakeLPAwarded(indexed address,indexed address,uint256,uint256)
          handler: handleBucketTakeLPAwarded
        - event: DecreaseLPAllowance(indexed address,indexed address,uint256[],uint256[])
          handler: handleDecreaseLPAllowance
        - event: DrawDebt(indexed address,uint256,uint256,uint256)
          handler: handleDrawDebt
        - event: Flashloan(indexed address,indexed address,uint256)
          handler: handleFlashloan
        - event: IncreaseLPAllowance(indexed address,indexed address,uint256[],uint256[])
          handler: handleIncreaseLPAllowance
        - event: Kick(indexed address,uint256,uint256,uint256)
          handler: handleKick
        - event: KickReserveAuction(uint256,uint256,uint256)
          handler: handleReserveAuctionKick
        - event: LoanStamped(indexed address)
          handler: handleLoanStamped
        - event: MoveQuoteToken(indexed address,indexed uint256,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleMoveQuoteToken
        - event: RemoveCollateral(indexed address,indexed uint256,uint256,uint256)
          handler: handleRemoveCollateral
        - event: RemoveQuoteToken(indexed address,indexed uint256,uint256,uint256,uint256)
          handler: handleRemoveQuoteToken
        - event: RepayDebt(indexed address,uint256,uint256,uint256)
          handler: handleRepayDebt
        - event: ReserveAuction(uint256,uint256,uint256)
          handler: handleReserveAuctionTake
        - event: ResetInterestRate(uint256,uint256)
          handler: handleResetInterestRate
        - event: RevokeLPAllowance(indexed address,indexed address,uint256[])
          handler: handleRevokeLPAllowance
        - event: RevokeLPTransferors(indexed address,address[])
          handler: handleRevokeLPTransferors
        - event: Settle(indexed address,uint256)
          handler: handleSettle
        - event: Take(indexed address,uint256,uint256,uint256,bool)
          handler: handleTake
        - event: TransferLP(address,address,uint256[],uint256)
          handler: handleTransferLP
        - event: UpdateInterestRate(uint256,uint256)
          handler: handleUpdateInterestRate
      file: ./src/erc-20-pool.ts
